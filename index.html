<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>ToDo Using AngukarJS</title>
    <link href="https://fonts.googleapis.com/css?family=Mogra" rel="stylesheet">

    <style>
        * {
            font-family: 'Mogra', cursive, sans-serif;
        }
        
        .container {
            width: 80vw;
            border-radius: 10px;
            margin: 0 auto;
            box-shadow: 0 1px 10px 1px grey;
            padding: 20px 15px;
        }
        
        h1 {
            color: #62cca8;
        }
        
        .text-center {
            text-align: center;
        }
        
        #todoInput {
            width: 68%;
            padding: 5px 10px;
            border: 1px solid #62cca8;
            border-radius: 5px;
        }
        
        #btn {
            border-radius: 5px;
            padding: 5px 10px;
            margin: 5px 0;
            font-size: 1em;
            border: 1px solid #158ecf;
            background-color: #b3d9ec;
        }
        
        .itemHolder {
            width: 90%;
            margin: 10px auto;
            padding: 5px;
            border-radius: 10px;
            border: 1px solid #62cca8;
        }
        
        .itemHolder:hover {
            background: #d5fbee;
        }
        
        span {
            color: #199ada;
        }
        
        .close {
            --size: 15px;
            height: var(--size);
            width: var(--size);
            border-radius: 100%;
            border: 1px solid #199ada;
            float: right;
            position: relative;
            top: 2px;
        }
        
        .close:before,
        .close:after {
            content: '';
            display: block;
            width: 2px;
            height: 80%;
            position: absolute;
            top: 10%;
            left: 46%;
            background: #199ada;
        }
        
        .close:before {
            transform: rotate(45deg);
        }
        
        .close:after {
            transform: rotate(-45deg);
        }
        
        .close:active:before,
        .close:active:after {
            background: #000;
        }
        
        .strike {
            text-decoration: line-through;
            text-decoration-color: #FFF;
        }
        
        .done {
            background: #e5e5e5;
        }
        
        @media (min-width:769px) {
            .container {
                width: 60vw;
            }
            .itemHolder {
                width: 75%;
            }
        }
    </style>

</head>

<body ng-app="todoApp" ng-controller="todoCtrl">

    <section class="container">
        <h1 class="text-center">AngularJS ToDo App</h1>
        <form class="text-center" ng-submit="addToList()">
            <input type="text" name="todo" id="todoInput" placeholder="Enter Here" ng-model="todoVal">
            <button type="submit" id="btn">Add</button>
        </form>
        <div class="itemContainer">
            <div class="itemHolder" ng-repeat="todo in todoList">
                <input type="checkbox" class="check" ng-model="todo.marked" ng-click="toggleMark(todo)"><span>{{todo.todoText}}</span>
                <div class="close" ng-click="close(todo)"></div>
            </div>
        </div>
    </section>

    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular.min.js"></script>
    <script>
        var app = angular.module("todoApp", []);
        app.controller("todoCtrl", function ($scope) {
            $scope.todoList = [];
            $scope.todoVal = "";

            $scope.addToList = function () {
                if ($scope.todoVal != "") {
                    $scope.todoList.push({
                        todoText: $scope.todoVal,
                        marked: false
                    });
                    $scope.todoVal = "";
                }
            };

            $scope.close = function (element) {
                $scope.index = $scope.todoList.indexOf(element);
                $scope.todoList.splice($scope.index, 1);
            }

            $scope.toggleMark = function (element) {
                $scope.index = $scope.todoList.indexOf(element);
                $scope.tag = document.querySelectorAll("span");
                $scope.element = $scope.tag[$scope.index];
                if ($scope.element.className.search(/strike/i) > 0) {
                    $scope.todoList[$scope.index].marked = false;
                    $scope.element.className = $scope.element.className.replace(/(?:^|\s)strike(?!\S)/g, '');
                    $scope.element.parentElement.className = $scope.element.parentElement.className.replace(/(?:^|\s)done(?!\S)/g, '');
                } else {
                    $scope.todoList[$scope.index].marked = true;
                    $scope.element.className += " strike";
                    $scope.element.parentElement.className += " done";
                }
            }

            $scope.removeMarked = function () {
                angular.forEach(todoList, function (x) {
                    if (x.marked)
                        $scope.todoList.pop(x);
                });
            };
        });
    </script>

</body>

</html>